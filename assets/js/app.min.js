$((function mailingAddress(){var mailingAddressObj={},mailingAddressObjStandard={},xhr=null;function startAddressVerificationProcess(){null===xhr&&($("#jsMailingAddressForm").find('button[type="submit"]').text("Submitting.."),xhr=$.post(window.location.href+"mailing-address/",{action:"add",data:mailingAddressObj}).done((function(response){if(xhr=null,$("#jsMailingAddressForm").find('button[type="submit"]').text("Submit"),response.errors){let errorsArray=[];for(let index in response.errors)errorsArray.push(response.errors[index][0]);return loadError(errorsArray)}$("#jsOMACountry").text(mailingAddressObj.country),$("#jsOMACity").text(mailingAddressObj.city),$("#jsOMAState").text(mailingAddressObj.state),$("#jsOMAZipCode").text(mailingAddressObj.zipcode),$("#jsOMAAddress").text(mailingAddressObj.address_1),$("#jsOMAAddress2").text(mailingAddressObj.address_2),$("#jsSMACountry").text(mailingAddressObj.country),$("#jsSMACity").text(response.success.Address.City),$("#jsSMAState").text(response.success.Address.State),$("#jsSMAZipCode").text(response.success.Address.Zip4+" / "+response.success.Address.Zip5),$("#jsSMAAddress").text(response.success.Address.Address2),$("#jsSMAAddress2").text(response.success.Address.Address1||""),mailingAddressObjStandard={country:mailingAddressObj.country,state:response.success.Address.State,city:response.success.Address.City,zipcode:response.success.Address.Zip4,zipcode5:response.success.Address.Zip5,address_1:response.success.Address.Address2,address_2:response.success.Address.Address1||""},pageShifter("confirm")})).fail((function(){xhr=null})))}function saveAddress(finalMailingAddressObj){null===xhr&&($(".jsSaveAddress").text("Submitting.."),xhr=$.post(window.location.href+"mailing-address/save",{finalMailingAddressObj:finalMailingAddressObj}).done((function(response){if(xhr=null,$(".jsSaveAddress").text("Submit"),response.error)return loadError(["Failed to add mailing address."],".jsErrorAreaConfirm");alert("Your mailing address has been added,"),window.location.reload()})).fail((function(){xhr=null})))}function pageShifter(toPage){$(".csPage").addClass("visually-hidden"),$('.csPage[data-tag="'+toPage+'"]').removeClass("visually-hidden")}function loadError(errorsArray,target){$(target||".jsErrorArea").html(errorsArray.join("<br />")).show()}function setMailingAddressObject(){mailingAddressObj={country:"",state:"",city:"",zipcode:"",address_1:"",address_2:""},mailingAddressObjStandard={}}$(".jsErrorArea").hide(0),$(".jsErrorAreaConfirm").hide(0),$("#jsMailingAddressForm").submit((function(event){event.preventDefault(),$(".jsErrorArea").hide(0),$(".jsErrorAreaConfirm").hide(0),setMailingAddressObject(),mailingAddressObj.country=$("#jsCountry").val(),mailingAddressObj.state=$("#jsState").val(),mailingAddressObj.city=$("#jsCity").val().trim(),mailingAddressObj.zipcode=$("#jsZipCode").val().trim(),mailingAddressObj.address_1=$("#jsAddress").val().trim(),mailingAddressObj.address_2=$("#jsAddress2").val().trim();let errorsArray=[];if(mailingAddressObj.country||errorsArray.push("Country is missing."),mailingAddressObj.state&&0!=mailingAddressObj.state||errorsArray.push("State is missing."),mailingAddressObj.city||errorsArray.push("City is missing."),mailingAddressObj.zipcode||errorsArray.push("ZipCode is missing."),mailingAddressObj.address_1||errorsArray.push("Address is missing."),errorsArray.length)return loadError(errorsArray);startAddressVerificationProcess()})),$(".jsPage").click((function(event){event.preventDefault(),mailingAddressObjStandard={},pageShifter($(this).data("page"))})),$(".jsSaveAddress").click((function(event){event.preventDefault(),$(".jsErrorAreaConfirm").hide(0);let option=$('input[name="mailingAddressType"]:checked').val();return void 0===option?loadError(["Please select an option"],".jsErrorAreaConfirm"):0===Object.keys(mailingAddressObjStandard).length?loadError(["Please run the address validation first."],".jsErrorAreaConfirm"):void saveAddress("standard"==option?mailingAddressObjStandard:mailingAddressObj)}))}));