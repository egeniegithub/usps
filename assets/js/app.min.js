$((function mailingAddress(){var mailingAddressObj={},mailingAddressObjStandard={},xhr=null;function startAddressVerificationProcess(){null===xhr&&($("#jsMailingAddressForm").find('button[type="submit"]').text("Submitting.."),xhr=$.post(window.location.href+"mailing-address/",{action:"add",data:mailingAddressObj}).done((function(response){if(xhr=null,$("#jsMailingAddressForm").find('button[type="submit"]').text("Submit"),response.errors){let errorsArray=[];for(let index in response.errors)errorsArray.push(response.errors[index][0]);return loadError(errorsArray)}$("#jsOMACity").text(mailingAddressObj.city),$("#jsOMAState").text(mailingAddressObj.state),$("#jsOMAZipCode").text(mailingAddressObj.zipcode),$("#jsOMAAddress").text(mailingAddressObj.address_1),$("#jsOMAAddress2").text(mailingAddressObj.address_2),$("#jsSMACity").text(response.success.Address.City),$("#jsSMAState").text(response.success.Address.State),$("#jsSMAZipCode").text(response.success.Address.Zip4),$("#jsSMAAddress").text(response.success.Address.Address2),$("#jsSMAAddress2").text(response.success.Address.Address1||""),mailingAddressObjStandard={country:mailingAddressObj.country,state:response.success.Address.State,city:response.success.Address.City,zipcode:response.success.Address.Zip4,zipcode5:response.success.Address.Zip5,address_1:response.success.Address.Address2,address_2:response.success.Address.Address1||""},$("#addressModal").modal()})).fail((function(){xhr=null})))}function saveAddress(finalMailingAddressObj){null===xhr&&(xhr=$.post(window.location.href+"save-mailing-address",{finalMailingAddressObj:finalMailingAddressObj}).done((function(response){if(xhr=null,response.error)return loadError(["Failed to add mailing address."],".jsErrorAreaConfirm");$(".jsSuccessAreaConfirm").show()})).fail((function(){xhr=null})))}function loadError(errorsArray,target){$(target||".jsErrorArea").html(errorsArray.join("<br /><br /><br />")).show()}function setMailingAddressObject(){mailingAddressObj={country:"",state:"",city:"",zipcode:"",address_1:"",address_2:""},mailingAddressObjStandard={}}$(".jsErrorArea").hide(0),$(".jsErrorAreaConfirm").hide(0),$(".jsSuccessAreaConfirm").hide(0),$("#jsMailingAddressForm").submit((function(event){event.preventDefault(),$(".jsErrorArea").hide(0),$(".jsErrorAreaConfirm").hide(0),$(".jsSuccessAreaConfirm").hide(0),setMailingAddressObject(),mailingAddressObj.country="US",mailingAddressObj.state=$("#jsState").val(),mailingAddressObj.city=$("#jsCity").val().trim(),mailingAddressObj.zipcode=$("#jsZipCode").val().trim(),mailingAddressObj.address_1=$("#jsAddress").val().trim(),mailingAddressObj.address_2=$("#jsAddress2").val().trim();let errorsArray=[];if(mailingAddressObj.state&&0!=mailingAddressObj.state||errorsArray.push("State is missing."),mailingAddressObj.city||errorsArray.push("City is missing."),mailingAddressObj.zipcode||errorsArray.push("ZipCode is missing."),mailingAddressObj.address_1||errorsArray.push("Address is missing."),errorsArray.length)return loadError(errorsArray);startAddressVerificationProcess()})),$(".jsSaveAddress").click((function(event){event.preventDefault(),$(".jsErrorAreaConfirm").hide(0),$(".jsSuccessAreaConfirm").hide(0);let option=$('input[name="options"]:checked').val();if(0===Object.keys(mailingAddressObjStandard).length)return loadError(["Please run the address validation first."],".jsErrorAreaConfirm");saveAddress("standardized"==option?mailingAddressObjStandard:mailingAddressObj)}))})),$(document).ready((function(){$(".btn-group-toggle label#original-data").click((function(){$(".dataLoad #original").css("display","block"),$(".dataLoad #standardized").css("display","none")})),$(".btn-group-toggle label#standardized-data").click((function(){$(".dataLoad #original").css("display","none"),$(".dataLoad #standardized").css("display","block")}))}));